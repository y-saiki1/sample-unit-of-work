# 環境構築
1. リポジトリをクローン
```bash
git clone https://github.com/y-saiki1/upsidr-coding-test.git
```

2. dockerで環境を構築
```bash
docker compose up -d
```

3. 構築後、DBとサーバの初期化

**makeコマンドは全てホスト側から実行する想定**


```bash
make api-gen # apiサーバーコードの自動生成（今回はソースコード管理に混ぜていますのでやらなくても大丈夫）

make migrate-dev # データベースのテーブル群を構成

make seed-dev # データベースでサンプルデータを挿入

make dbclear-dev # データベースをクリーンアップする（migrateからやり直し必要）
```

# テスト

```bash

make exec-test

```


# レイヤーの役割について

#### handler層の役割について
リクエストの引き受け場所、ここで各種レイヤーに必要な構造体を初期化をして渡す<br>

#### domin
エンティティや値オブジェクトを定義し、必要なロジックを組む層<br>

#### service
ドメインサービス層の役割<br>
複数のエンティティを使用した処理や、値オブジェクト間で何らかの処理を行う場合に使用する層<br>
例えば、グループにユーザーを追加して、参加人数を計算し、会費を算出するなど。<br>
また、インフラレイヤーにて確認すべき条件を記述する場所でもあるので、Repositoryなど適宜渡すこと<br>

#### usecase
アプリケーションサービス層の役割<br>
ここではトランザクションの制御やドメインサービスの呼び出し、リポジトリを使用した永続化を担当する層<br>


#### querymodel
一覧や単純なデータ閲覧に使用するモデル<br>
検索条件のモデルも取り扱う<br>

#### queryservice
一覧や単純なデータ閲覧にこのサービスを使用する<br>